<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://kevin5979.github.io</id>
    <title>kevin5979</title>
    <updated>2022-07-06T15:57:49.365Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="http://kevin5979.github.io"/>
    <link rel="self" href="http://kevin5979.github.io/atom.xml"/>
    <subtitle>éšå½±çš„ç¢ç¢å¿µ</subtitle>
    <logo>http://kevin5979.github.io/images/avatar.png</logo>
    <icon>http://kevin5979.github.io/favicon.ico</icon>
    <rights>All rights reserved 2022, kevin5979</rights>
    <entry>
        <title type="html"><![CDATA[è®°å½•æˆ‘çš„æ¯•ä¸š]]></title>
        <id>http://kevin5979.github.io/post/ji-lu-wo-de-bi-ye/</id>
        <link href="http://kevin5979.github.io/post/ji-lu-wo-de-bi-ye/">
        </link>
        <updated>2022-07-06T14:52:53.000Z</updated>
        <content type="html"><![CDATA[<figure data-type="image" tabindex="1"><img src="http://kevin5979.github.io/post-images/1657121581446.jpg" alt="" loading="lazy"></figure>
<h2 id="æ¯•ä¸š">æ¯•ä¸š</h2>
<p>è½¬çœ¼åˆ°äº†å…­ä¸ƒæœˆç››å¤ï¼Œå®Œæˆäº†æ¯•ä¸šè®¾è®¡ï¼Œæ‹¿åˆ°æ¯•ä¸šè¯ä¹¦ä»¿ä½›å°±æ˜¯ä¸€ç¬é—´ï¼Œä¸€ç¬é—´è¢«æ‰”åˆ°ç¤¾ä¼šä¸Šæ¥å—æ¯’æ‰“ï¼Œéƒ½è¿˜æ²¡å‡†å¤‡å¥½ï¼Œå¤§å®¶å°±æ¬ç€è¡Œæå„æ‰§ä¸€è·¯ï¼Œæˆ‘å®¿èˆçš„å››ä¸ªäººï¼Œåœ¨æœ€åç”šè‡³æ²¡æœ‰å†åƒè¿‡ä¸€é¡¿é¥­ï¼Œæ²¡æœ‰å†æ‹ä¸€å¼ é›†ä½“ç…§ã€‚</p>
<h2 id="åŒå­¦ä»¬">åŒå­¦ä»¬</h2>
<p>è®°å¾—æœ€åç¦»æ ¡çš„å‡ å¤©ï¼Œæ¯å¤©åœ¨éš”å£çš„å®¿èˆèŠå¤©å¹ç‰›ï¼Œä»€ä¹ˆéƒ½è®²ï¼Œå¤§å®¶æ¬¢èšä¸€å ‚ï¼Œå¯èƒ½è¿™ä¾¿æ˜¯å¤§å­¦å››å¹´æ•£åœºæœ€åçš„å–§åš£ã€‚å¤§å®¶ä¸€èµ·èŠå·¥ä½œï¼ŒèŠå…«å¦ï¼Œäº’ç›¸æ‰“é—¹ï¼Œç›¸äº’è°ƒä¾ƒï¼Œä¼°è®¡å†è¿‡å‡ ä¸ªæœˆï¼Œè¿™ä¸ªå®¿èˆè¿˜ä¼šå†æ¬¡è¿æ¥æ–°çš„ä¸€æ‰¹ä¸»äººï¼Œä¸€å±Šä¸€å±Šäº‹ç‰©ä¾æ—§ã€‚</p>
<h2 id="å¦‚ä»Š">å¦‚ä»Š</h2>
<p>åå‡ å¹³ç±³çš„å°å•é—´ï¼Œæ‰¿è½½ç€æˆ‘è¿™ç”Ÿæ´»çš„å…¨éƒ¨ï¼Œæ¯å¤©8ç‚¹å‡ºé—¨ï¼Œ7ç‚¹å›æ¥ï¼Œæœä¹æ™šå…­çš„å·¥ä½œï¼Œæœ€æœ€è®©æˆ‘å¼€å¿ƒçš„æ˜¯ï¼Œæ¯å¤©å’Œå®¶é‡Œæ‰“å¾®ä¿¡è§†é¢‘çš„èŠå¤©ï¼ŒèŠèŠä»Šå¤©çš„å·¥ä½œï¼Œä»¥åŠå‘¨å›´çš„ä¸€åˆ‡æ–°å¥‡çš„äº‹æƒ…ï¼Œè¿™çœŸçš„æ˜¯æˆ‘ç‹¬å±…å°å•é—´æœ€å¤§çš„ï¼Œä¹Ÿæ˜¯æœ€å¹¸ç¦çš„äº‹æƒ…ã€‚</p>
<h2 id="å·¥ä½œ">å·¥ä½œ</h2>
<p>éƒ½è¯´ä»Šå¹´åº”å±Šæ¯•ä¸šç”Ÿå·¥ä½œéš¾æ‰¾ï¼Œæˆ‘æ˜¯è§è¯†åˆ°äº†ï¼Œåœ¨æ·±åœ³çš„ä¸€ä¸ªæœˆé‡Œï¼Œå¤§å¤§å°å°é¢äº†åæ¥å®¶ï¼Œç»ˆäºæ‰æ‹¿åˆ°ä¸€ä¸ªoffer, æˆ‘å¾ˆå¹¸è¿ï¼Œä¹Ÿå¾ˆçæƒœï¼Œä¹‹å‰æˆ‘ä¹Ÿæƒ³è¿‡è½¬è¡Œï¼Œä¹Ÿæ‰¾è¿‡åˆ«çš„å·¥ä½œï¼Œä½†åˆ«äººéƒ½ä¸è¦ï¼ŒçœŸå®çš„å¿ƒå¡ï¼Œå°±åƒå®¶é‡Œäººè¯´çš„ï¼Œå…ˆå…¥è¡Œï¼Œå†è€ƒè™‘è–ªèµ„çš„æƒ…å†µï¼Œå—¯ï¼Œç›®å‰æˆ‘å·²ç»ä¸Šç­å‡ å¤©äº†ï¼Œå…¬å¸åŒäº‹ä»¬éƒ½æŒºç…§é¡¾æˆ‘ï¼Œå¸Œæœ›èƒ½åœ¨è¿™å®¶å…¬å¸æˆé•¿å§ã€‚</p>
<h2 id="æ²»æ„ˆ">æ²»æ„ˆ</h2>
<p>æœ€è¿‘è¿·ä¸Šäº†å¬è¿™ç§æ²»æ„ˆçš„æ­Œæ›²ï¼Œæ¯å¤©åœ¨å…¬äº¤ã€åœ°é“ä¸Šï¼Œéš¾å…ä¼šæ€ç»ªç¿»æ¶Œï¼Œä¸€äº›å¯¹äºæœªæ¥çš„æƒ³æ³•ï¼Œé¢åŒ…å’Œç†æƒ³ï¼Œé¼“åŠ±è‡ªå·±åšæŒä¸‹å»ï¼Œæˆ‘å·²ç»æ¯•ä¸šäº†ï¼Œæ˜¯ç¤¾ä¼šäº†ï¼Œä¸åœ¨å°å­©å­è„¾æ°”ï¼Œæ‘’å¼ƒå­¦ç”Ÿçš„åŠäº‹æ€ç»´ï¼Œè¦åŠªåŠ›ï¼Œè¦åˆ†æ‹…å®¶é‡Œè´Ÿæ‹…ï¼Œå¸Œæœ›ä¸€åˆ‡é¡ºåˆ©å§ã€‚</p>
<h2 id="è·ƒå…¥äººæµ·">è·ƒå…¥äººæµ·</h2>
<p>å†è§äº†ï¼Œå­¦ç”Ÿç”Ÿæ¶¯ï¼Œè®©æˆ‘ä»¬ä¸€èµ·è·ƒå…¥äººæµ·ï¼Œåšä¸€æœµå¥”æ¶Œçš„æµªèŠ±ã€‚</p>
 <br/>
<font size="2">æœ€åæ›´æ–°äº 2022-7-6</font>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[2021å¹´åº¦æ€»ç»“]]></title>
        <id>http://kevin5979.github.io/post/2021-nian-du-zong-jie/</id>
        <link href="http://kevin5979.github.io/post/2021-nian-du-zong-jie/">
        </link>
        <updated>2021-12-31T01:36:43.000Z</updated>
        <summary type="html"><![CDATA[<p>æ—¶å…‰åŒ†åŒ†ï¼Œåˆä¸€å¹´å‡†å¤‡ç»“æŸäº†ï¼Œå›é¡¾ä¸€å¹´æ¥çš„å·¥ä½œç”Ÿæ´»ï¼Œæ”¶è·äº†è®¸å¤šâ¤ï¸ğŸ’›ğŸ’šğŸ’™ğŸ’œğŸ–¤ğŸ’—</p>
]]></summary>
        <content type="html"><![CDATA[<p>æ—¶å…‰åŒ†åŒ†ï¼Œåˆä¸€å¹´å‡†å¤‡ç»“æŸäº†ï¼Œå›é¡¾ä¸€å¹´æ¥çš„å·¥ä½œç”Ÿæ´»ï¼Œæ”¶è·äº†è®¸å¤šâ¤ï¸ğŸ’›ğŸ’šğŸ’™ğŸ’œğŸ–¤ğŸ’—</p>
<!-- more -->
<p>å†™äº†å¾ˆå¤šï¼Œæœ€ååˆ äº†ï¼Œ2021è¿™ä¸€å¹´ï¼Œä»å­¦ç”Ÿé€æ¸è½¬è¿›å…¥ç¤¾ä¼šï¼Œæ‰¾åˆ°äº†å®ä¹ å·¥ä½œï¼ŒæŠ€æœ¯ä¸Šæ²¡æœ‰å­¦ä¹ åˆ°æ–°æŠ€æœ¯ï¼Œä½†ç»å†äº†å‡ ä¸ªé¡¹ç›®ä¹‹åï¼Œæˆ‘å¯¹ä¹‹å‰çš„æŠ€æœ¯çŸ¥è¯†æŒæ¡æ›´åŠ æ·±åˆ»ï¼Œå¦å¤–ï¼Œä»Šå¤©ä¹Ÿæ˜¯ç¦»èŒçš„æ—¥å­ï¼Œ2021ç»™äºˆæˆ‘çš„æ˜¯æ›´å¤šçš„ç²¾ç¥æ–¹é¢å’Œæ¥äººå¾…ç‰©æ–¹é¢çš„æˆé•¿ï¼Œä»Šå¹´æ€»ç»“è´´å‡ ä¸ªæ ‡ç­¾ç®—äº†ï¼Œæ¥å¹´ç»§ç»­åŠªåŠ›</p>
<p>ğŸ¥•å­¦æ ¡è€ƒè¯•é¡ºåˆ©é€šè¿‡ï¼Œå·²è¾¾åˆ°æ¯•ä¸šè¦æ±‚ğŸ¥•<br>
ğŸ¥•æ‰¾åˆ°å®ä¹ å·¥ä½œğŸ¥•<br>
ğŸ¥•æ¢æ–°æ‰‹æœºäº†ğŸ¥•<br>
ğŸ¥•è½¯è€ƒé«˜çº§æŒ‚äº†ï¼Œä¸‹æ¬¡åŠ æ²¹ğŸ¥•<br>
ğŸ¥•æ‰¾åˆ°å®ä¹ å·¥ä½œğŸ¥•<br>
ğŸ¥•å»ä¸Šæµ·å‡ºå·®ğŸ¥•<br>
ğŸ¥•æ¯•ä¸šè®¾è®¡é€‰é¢˜ğŸ¥•<br>
ğŸ¥•ä»Šå¤©ç¦»èŒå•¦ğŸ¥•</p>
<p>2022è®¸æ„¿ï¼Œ â¤ï¸æ‰¾åˆ°æ»¡æ„çš„å·¥ä½œï¼Œå†æ¢å°ç”µè„‘ï¼Œé¡ºåˆ©æ¯•ä¸šâ¤ï¸</p>
 <br/>
<font size="2">æœ€åæ›´æ–°äº 2021-12-31</font>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[git å¦‚ä½•æŠŠdevelopåˆ†æ”¯ä»£ç åˆå¹¶åˆ°masterä¸»åˆ†æ”¯ï¼Ÿ]]></title>
        <id>http://kevin5979.github.io/post/git-ru-he-ba-develop-fen-zhi-dai-ma-he-bing-dao-master-zhu-fen-zhi/</id>
        <link href="http://kevin5979.github.io/post/git-ru-he-ba-develop-fen-zhi-dai-ma-he-bing-dao-master-zhu-fen-zhi/">
        </link>
        <updated>2021-12-16T03:10:37.000Z</updated>
        <summary type="html"><![CDATA[<p><code>master ä¸»åˆ†æ”¯</code>  <code>develop åˆ†æ”¯</code><br>
ä¸€èˆ¬æˆ‘ä»¬åœ¨å¼€å‘é¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œä¼šåœ¨åˆ†æ”¯ä¸­å»å¼€å‘ï¼Œåœ¨å¼€å‘ç»“æŸçš„ä¸€ä¸ªå‘¨æœŸå†æŠŠä»£ç ä»£ç åˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¸­ã€‚æ‰€ä»¥å°±ä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•æŠŠåˆ†æ”¯ä»£ç åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼Œæ¥ä¸‹æ¥è®°å½•ä¸€ä¸‹æˆ‘åˆå¹¶åˆ†æ”¯çš„ä¸€ä¸ªå‘½ä»¤æµç¨‹</p>
<p><strong>å‰ææ˜¯ï¼Œåˆ†æ”¯ä»£ç å’Œä¸»åˆ†æ”¯ä»£ç ä¸ä¼šæœ‰å†²çªï¼Œå°±æ˜¯è¯´ä¸»åˆ†æ”¯ç›®å‰çš„æ‰€æœ‰çš„ä»£ç å’Œåˆ†æ”¯é‚£éƒ¨åˆ†ä»£ç æ˜¯ç›¸åŒçš„ã€‚</strong></p>
]]></summary>
        <content type="html"><![CDATA[<p><code>master ä¸»åˆ†æ”¯</code>  <code>develop åˆ†æ”¯</code><br>
ä¸€èˆ¬æˆ‘ä»¬åœ¨å¼€å‘é¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œä¼šåœ¨åˆ†æ”¯ä¸­å»å¼€å‘ï¼Œåœ¨å¼€å‘ç»“æŸçš„ä¸€ä¸ªå‘¨æœŸå†æŠŠä»£ç ä»£ç åˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¸­ã€‚æ‰€ä»¥å°±ä¼šå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•æŠŠåˆ†æ”¯ä»£ç åˆå¹¶åˆ°ä¸»åˆ†æ”¯ï¼Œæ¥ä¸‹æ¥è®°å½•ä¸€ä¸‹æˆ‘åˆå¹¶åˆ†æ”¯çš„ä¸€ä¸ªå‘½ä»¤æµç¨‹</p>
<p><strong>å‰ææ˜¯ï¼Œåˆ†æ”¯ä»£ç å’Œä¸»åˆ†æ”¯ä»£ç ä¸ä¼šæœ‰å†²çªï¼Œå°±æ˜¯è¯´ä¸»åˆ†æ”¯ç›®å‰çš„æ‰€æœ‰çš„ä»£ç å’Œåˆ†æ”¯é‚£éƒ¨åˆ†ä»£ç æ˜¯ç›¸åŒçš„ã€‚</strong></p>
<!-- more -->
<h3 id="1åˆ‡æ¢åˆ†æ”¯">1.åˆ‡æ¢åˆ†æ”¯</h3>
<blockquote>
<p>git checkout develop</p>
</blockquote>
<h3 id="2ç”¨git-pull-æŠŠåˆ†æ”¯ä»£ç pullä¸‹æ¥">2.ç”¨git pull æŠŠåˆ†æ”¯ä»£ç pullä¸‹æ¥</h3>
<blockquote>
<p>git pull origin develop</p>
</blockquote>
<h3 id="3åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯">3.åˆ‡æ¢åˆ°ä¸»åˆ†æ”¯</h3>
<blockquote>
<p>git checkout master</p>
</blockquote>
<h3 id="4æŠŠåˆ†æ”¯çš„ä»£ç mergeåˆ°ä¸»åˆ†æ”¯">4.æŠŠåˆ†æ”¯çš„ä»£ç mergeåˆ°ä¸»åˆ†æ”¯</h3>
<blockquote>
<p>git merge develop</p>
</blockquote>
<h3 id="5git-pushæ¨é€åˆ°è¿œç¨‹ä»“åº“ç°åœ¨ä½ è‡ªå·±åˆ†æ”¯çš„ä»£ç å°±åˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¸Šäº†">5.git pushæ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œç°åœ¨ä½ è‡ªå·±åˆ†æ”¯çš„ä»£ç å°±åˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¸Šäº†ã€‚</h3>
<blockquote>
<p>git push origin master</p>
</blockquote>
 <br/>
<font size="2">æœ€åæ›´æ–°äº 2021-12-16</font>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æˆ‘åˆ°ä¸Šæµ·çš„ä¸¤å‘¨]]></title>
        <id>http://kevin5979.github.io/post/wo-dao-shang-hai-de-liang-zhou/</id>
        <link href="http://kevin5979.github.io/post/wo-dao-shang-hai-de-liang-zhou/">
        </link>
        <updated>2021-12-10T14:41:44.000Z</updated>
        <summary type="html"><![CDATA[<p><strong>æœ€è¿‘ä¸¤å‘¨å»äº†ä¸Šæµ·å‚ä¸äº†æŸšè¶£ç›²ç›’é¡¹ç›®çš„å¼€å‘ï¼Œæ¯”è¾ƒå¿™ï¼Œä»Šå¤©å·²ç»å›åˆ°æ·±åœ³å•¦ğŸ˜‹ï¼Œè®°å½•ä¸€ä¸‹æˆ‘åœ¨ä¸Šæµ·çš„æ„Ÿå—å§</strong></p>
]]></summary>
        <content type="html"><![CDATA[<p><strong>æœ€è¿‘ä¸¤å‘¨å»äº†ä¸Šæµ·å‚ä¸äº†æŸšè¶£ç›²ç›’é¡¹ç›®çš„å¼€å‘ï¼Œæ¯”è¾ƒå¿™ï¼Œä»Šå¤©å·²ç»å›åˆ°æ·±åœ³å•¦ğŸ˜‹ï¼Œè®°å½•ä¸€ä¸‹æˆ‘åœ¨ä¸Šæµ·çš„æ„Ÿå—å§</strong></p>
<!-- more -->
<h3 id="å…³äºå¤©æ°”">å…³äºå¤©æ°”</h3>
<p>åˆšå¼€å§‹æŸ¥è¯¢ä¸Šæµ·çš„å¤©æ°”çš„æ—¶å€™ï¼Œ2<sub>3åº¦çš„æœ€ä½æ¸©ï¼Œç„¶åå°±å¸¦äº†å‡ ä»¶æˆ‘æœ€åšçš„è¡£æœï¼Œæ²¡æƒ³åˆ°ï¼Œåªæ˜¯æ¯”æ·±åœ³å†·ä¸€ç‚¹ï¼Œå¸¦å»çš„è¡£æœæ²¡ç”¨ä¸Š</sub></p>
<h3 id="å…³äºäº¤é€š">å…³äºäº¤é€š</h3>
<p>ä¸Šæµ·çš„åœ°é“æ„Ÿè§‰æœ‰äº›æ…¢èŠ‚å¥ï¼Œå¼€å…³é—¨éƒ½æ˜¯1åˆ†é’Ÿä»¥ä¸Šçš„æ„Ÿè§‰ï¼Œè¿™è¦æ˜¯åœ¨æ·±åœ³ï¼Œæ„Ÿè§‰15ç§’éƒ½å¤šäº†.. ä»é…’åº—åˆ°å…¬å¸ï¼Œ30åˆ†é’Ÿçš„è·¯ç¨‹ï¼Œèµ°è·¯ï¼Œå‘¨è¾¹é£æ™¯å¾ˆç¾ï¼Œç»¿åŒ–ä¹Ÿå¾ˆå¥½ï¼Œç©ºæ°”æ¸…æ™°ï¼Œä½ è¿˜èƒ½çœ‹åˆ°æ¯å¤©æ—©ä¸Šæœ‰äººåœ¨æ¹–è¾¹é’“é±¼ï¼Œååˆ†æƒ¬æ„</p>
<h3 id="å…¬å¸çš„æ°›å›´">å…¬å¸çš„æ°›å›´</h3>
<p>ä¸Šæµ·æŸšå­å·¥é“æ˜¯ä¸€å®¶å¾ˆæœ‰å‡èšåŠ›çš„å…¬å¸ï¼Œä¸Šç­æ—¶é—´ä¹Ÿæ¯”è¾ƒæ¾ï¼Œå‘¨æœ«åŒä¼‘ï¼Œæ—©ä¸Šæ˜¯9ç‚¹åŠåˆ°10ç‚¹ åˆ°å…¬å¸å°±å¯ä»¥ï¼Œä¸­åˆ11ç‚¹åŠå°±å¯ä»¥åƒåˆé¥­å•¦ï¼Œä¸‹åˆæ˜¯ä¸€ç‚¹é’Ÿåˆ°6ç‚¹åŠçš„ä¸Šç­æ—¶é—´ï¼Œä¸Šç­æ˜¯å¯ä»¥æœ‰å¾ˆå¤šè®¨è®ºï¼Œç‰¹åˆ«æ˜¯ä¸šåŠ¡ç›¸å…³çš„è®¨è®ºï¼Œæ¯ä¸ªäººéƒ½è®¤çœŸæå‡ºè‡ªå·±çš„æƒ³æ³•ï¼Œç¾¤ç­–ç¾¤åŠ›ï¼Œæ°›å›´å¾ˆå¯ä»¥</p>
<h3 id="å…³äºå¥½åƒçš„">å…³äºå¥½åƒçš„</h3>
<p>å…¬å¸æ¥¼ä¸‹å°±æœ‰é¤å…ï¼Œæ‰‹æ’•é¸¡ä¸é”™ï¼Œå…¶ä»–çš„ä¹Ÿå¯ä»¥ï¼Œèœå“æ¯”è¾ƒå¤šï¼Œä»·æ ¼æ­£å¸¸ï¼Œå¯èƒ½æ¯”æ·±åœ³çš„è´µä¸€ä¸¢ä¸¢ï¼Œæˆ‘ä¹Ÿå°±ä¼šåƒ.. èœåä¸è®°å¾—äº†ğŸ˜¶</p>
<h3 id="ä¸Šæµ·çš„æ™¯ç‚¹">ä¸Šæµ·çš„æ™¯ç‚¹</h3>
<p>å‘¨æœ«æ—¶é—´å»äº†ä¸‹å¤–æ»©ï¼Œå—äº¬è¡—ï¼Œä¸œæ–¹æ˜ç ï¼Œå¤œæ™¯å¾ˆå¥½çœ‹ï¼Œå¾ˆå¤šæ„Ÿæ…¨ï¼Œå¤§éƒ½å¸‚çš„é£é‡‡ï¼Œæ¸¸äººä¹Ÿå¾ˆç¤¼è²Œï¼Œæ„Ÿè§‰å¾ˆå¥½ï¼Œå¸Œæœ›ä¸‹æ¬¡è¿˜èƒ½æ¥å‘€</p>
<figure data-type="image" tabindex="1"><img src="http://kevin5979.github.io/post-images/1639199215487.jpg" alt="" loading="lazy"></figure>
<p>å›åˆ°æ·±åœ³ï¼Œç»§ç»­åŠ æ²¹ï¼ï¼ï¼<br>
ä»Šå¤©å‘¨å…­ï¼Œç¥å¤§å®¶å‘¨æœ«æ„‰å¿«ï¼ï¼ï¼</p>
 <br/>
<font size="2">æœ€åæ›´æ–°äº 2021-12-10</font>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ€»ç»“: æ—¶é—´æ ¼å¼åŒ–]]></title>
        <id>http://kevin5979.github.io/post/zong-jie-shi-jian-ge-shi-hua/</id>
        <link href="http://kevin5979.github.io/post/zong-jie-shi-jian-ge-shi-hua/">
        </link>
        <updated>2021-11-13T15:03:56.000Z</updated>
        <summary type="html"><![CDATA[<p>æœ€è¿‘åœ¨æè‡ªå·±çš„uni-appå°é¡¹ç›®ï¼Œå‘ç°æ—¶é—´æ ¼å¼åŒ–åŠŸèƒ½éå¸¸å¸¸ç”¨çš„ï¼Œè€Œæˆ‘åˆä¸æƒ³ä½¿ç”¨ <code>dayjs</code> ç­‰å·¥å…·ï¼Œæ‰€ä»¥ï¼Œè®°å½•ä¸€ä¸‹æ—¶é—´æ ¼å¼åŒ–çš„å·¥å…·å‡½æ•°â±ï¼Œä»¥åéƒ½èƒ½æ¥è¿™é‡Œå¤åˆ¶ç²˜è´´å•¦</p>
]]></summary>
        <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨æè‡ªå·±çš„uni-appå°é¡¹ç›®ï¼Œå‘ç°æ—¶é—´æ ¼å¼åŒ–åŠŸèƒ½éå¸¸å¸¸ç”¨çš„ï¼Œè€Œæˆ‘åˆä¸æƒ³ä½¿ç”¨ <code>dayjs</code> ç­‰å·¥å…·ï¼Œæ‰€ä»¥ï¼Œè®°å½•ä¸€ä¸‹æ—¶é—´æ ¼å¼åŒ–çš„å·¥å…·å‡½æ•°â±ï¼Œä»¥åéƒ½èƒ½æ¥è¿™é‡Œå¤åˆ¶ç²˜è´´å•¦</p>
<!-- more -->
<h2 id="ç›´æ¥ä¸Šä»£ç ">ç›´æ¥ä¸Šä»£ç </h2>
<pre><code class="language-js">export function dateFormat(birthday,fmt) {
	let date = new Date(birthday);
	let ret;
	const opt = {
		&quot;Y+&quot;: date.getFullYear().toString(), // å¹´
		&quot;M+&quot;: (date.getMonth() + 1).toString(), // æœˆ
		&quot;D+&quot;: date.getDate().toString(), // æ—¥
		&quot;h+&quot;: date.getHours().toString(), // æ—¶
		&quot;m+&quot;: date.getMinutes().toString(), // åˆ†
		&quot;s+&quot;: date.getSeconds().toString() // ç§’
		// æœ‰å…¶ä»–æ ¼å¼åŒ–å­—ç¬¦éœ€æ±‚å¯ä»¥ç»§ç»­æ·»åŠ ï¼Œå¿…é¡»è½¬åŒ–æˆå­—ç¬¦ä¸²
	};
	for (let k in opt) {
		ret = new RegExp(&quot;(&quot; + k + &quot;)&quot;).exec(fmt);
		if (ret) {
			fmt = fmt.replace(ret[1], (ret[1].length == 1) ? (opt[k]) : (opt[k].padStart(ret[1].length, &quot;0&quot;)))
		};
	};
	return fmt;
}
</code></pre>
<p>ä»Šå¤©å‘¨å…­ï¼Œç¥å¤§å®¶å‘¨æœ«æ„‰å¿«ï¼ï¼ï¼</p>
 <br/>
<font size="2">æœ€åæ›´æ–°äº 2021-11-13</font>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[uni-app è·¯ç”±ç®¡ç† (uni-simple-router)]]></title>
        <id>http://kevin5979.github.io/post/uni-app-lu-you-guan-li-uni-simple-router/</id>
        <link href="http://kevin5979.github.io/post/uni-app-lu-you-guan-li-uni-simple-router/">
        </link>
        <updated>2021-11-10T01:49:53.000Z</updated>
        <summary type="html"><![CDATA[<p>è¿™å‘¨å¤©æ°”å˜å†·ï¼Œæˆ‘éƒ½ä¸æƒ³åŠ¨äº†ğŸ¥—ï¼Œå‰å‡ å¤©å‡†å¤‡é‡å†™ä¸€ä¸‹ä¹‹å‰çš„uni-appé¡¹ç›®ï¼Œå‘ç°ä¹‹å‰å†™çš„ä¸æ˜¯å¾ˆä¼˜é›…ï¼Œè·¯ç”±ç®¡ç†ä¸æ˜¯å¾ˆå¥½ï¼Œç™¾åº¦ä¸€æ³¢ï¼Œé¡ºåˆ©æ‰¾åˆ° <a href="https://hhyang.cn/v2/start/quickstart.html">uni-simple-router</a>ï¼Œè¯•éªŒä¸€æ³¢ï¼Œé¡ºåˆ©ä¸Šè½¦å•¦ğŸ™Š</p>
]]></summary>
        <content type="html"><![CDATA[<p>è¿™å‘¨å¤©æ°”å˜å†·ï¼Œæˆ‘éƒ½ä¸æƒ³åŠ¨äº†ğŸ¥—ï¼Œå‰å‡ å¤©å‡†å¤‡é‡å†™ä¸€ä¸‹ä¹‹å‰çš„uni-appé¡¹ç›®ï¼Œå‘ç°ä¹‹å‰å†™çš„ä¸æ˜¯å¾ˆä¼˜é›…ï¼Œè·¯ç”±ç®¡ç†ä¸æ˜¯å¾ˆå¥½ï¼Œç™¾åº¦ä¸€æ³¢ï¼Œé¡ºåˆ©æ‰¾åˆ° <a href="https://hhyang.cn/v2/start/quickstart.html">uni-simple-router</a>ï¼Œè¯•éªŒä¸€æ³¢ï¼Œé¡ºåˆ©ä¸Šè½¦å•¦ğŸ™Š</p>
<!-- more -->
<h2 id="ç®—äº†æ–‡æ¡£å·²ç»å†™çš„å¾ˆæ¸…æ¥š">ç®—äº†ï¼Œæ–‡æ¡£å·²ç»å†™çš„å¾ˆæ¸…æ¥š...</h2>
<p>å¿™ç€åŒåä¸€åŠ è´­ç‰©è½¦å‘¢ğŸ˜˜ï¼Œè°æœ‰ç©ºå•Š~ï¼Œè‡ªå·±çœ‹æ–‡æ¡£ <a href="https://hhyang.cn/v2/start/quickstart.html">uni-simple-router</a></p>
 <br/>
<font size="2">æœ€åæ›´æ–°äº 2021-11-10</font>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[è®¤è¯†ä¾¦å¬å™¨watch]]></title>
        <id>http://kevin5979.github.io/post/ren-shi-zhen-ting-qi-watch/</id>
        <link href="http://kevin5979.github.io/post/ren-shi-zhen-ting-qi-watch/">
        </link>
        <updated>2021-11-04T03:12:30.000Z</updated>
        <summary type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯ä¾¦å¬å™¨å‘¢">ä»€ä¹ˆæ˜¯ä¾¦å¬å™¨å‘¢ï¼Ÿ</h2>
<ul>
<li>å¼€å‘ä¸­æˆ‘ä»¬åœ¨dataè¿”å›çš„å¯¹è±¡ä¸­å®šä¹‰äº†æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®é€šè¿‡æ’å€¼è¯­æ³•ç­‰æ–¹å¼ç»‘å®šåˆ°templateä¸­ï¼›</li>
<li>å½“æ•°æ®å˜åŒ–æ—¶ï¼Œtemplateä¼šè‡ªåŠ¨è¿›è¡Œæ›´æ–°æ¥æ˜¾ç¤ºæœ€æ–°çš„æ•°æ®ï¼›</li>
<li>ä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä»£ç é€»è¾‘ä¸­ç›‘å¬æŸä¸ªæ•°æ®çš„å˜åŒ–ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨ä¾¦å¬å™¨watchæ¥å®Œæˆäº†ï¼›</li>
</ul>
]]></summary>
        <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯ä¾¦å¬å™¨å‘¢">ä»€ä¹ˆæ˜¯ä¾¦å¬å™¨å‘¢ï¼Ÿ</h2>
<ul>
<li>å¼€å‘ä¸­æˆ‘ä»¬åœ¨dataè¿”å›çš„å¯¹è±¡ä¸­å®šä¹‰äº†æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®é€šè¿‡æ’å€¼è¯­æ³•ç­‰æ–¹å¼ç»‘å®šåˆ°templateä¸­ï¼›</li>
<li>å½“æ•°æ®å˜åŒ–æ—¶ï¼Œtemplateä¼šè‡ªåŠ¨è¿›è¡Œæ›´æ–°æ¥æ˜¾ç¤ºæœ€æ–°çš„æ•°æ®ï¼›</li>
<li>ä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä»£ç é€»è¾‘ä¸­ç›‘å¬æŸä¸ªæ•°æ®çš„å˜åŒ–ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨ä¾¦å¬å™¨watchæ¥å®Œæˆäº†ï¼›</li>
</ul>
<!-- more -->
<h2 id="ä¾¦å¬å™¨çš„ç”¨æ³•">ä¾¦å¬å™¨çš„ç”¨æ³•</h2>
<ul>
<li>é€‰é¡¹ï¼šwatch</li>
<li>ç±»å‹ï¼š<code>{ [key: string]: string | Function | Object | Array}</code></li>
<li>è¯¦ç»†ï¼šä¸€ä¸ªå¯¹è±¡ï¼Œé”®æ˜¯éœ€è¦è§‚å¯Ÿçš„è¡¨è¾¾å¼ï¼Œå€¼æ˜¯å¯¹åº”å›è°ƒå‡½æ•°ã€‚å€¼ä¹Ÿå¯ä»¥æ˜¯æ–¹æ³•åï¼Œæˆ–è€…åŒ…å«é€‰é¡¹çš„å¯¹è±¡ã€‚Vue å®ä¾‹å°†ä¼šåœ¨å®ä¾‹åŒ–æ—¶è°ƒç”¨ <code>$watch()</code>ï¼Œéå†<code>watch</code>å¯¹è±¡çš„æ¯ä¸€ä¸ª <code>property</code>ã€‚</li>
</ul>
<h2 id="ä½¿ç”¨ä¾‹å­">ä½¿ç”¨ä¾‹å­</h2>
<pre><code class="language-js">var vm = new Vue({
  data: {
    a: 1,
    b: 2,
    c: 3,
    d: 4,
    e: {
      f: {
        g: 5
      }
    }
  },
  watch: {
    a: function (val, oldVal) {     // æœ€å¸¸è§ç”¨æ³•
      console.log('new: %s, old: %s', val, oldVal)
    },
    // æ–¹æ³•å someMethod å¿…é¡»åœ¨ methods ä¸­å®šä¹‰
    b: 'someMethod',
    // deep: true 
    // è¯¥å›è°ƒä¼šåœ¨ä»»ä½•è¢«ä¾¦å¬çš„å¯¹è±¡çš„ property æ”¹å˜æ—¶è¢«è°ƒç”¨ï¼Œä¸è®ºå…¶è¢«åµŒå¥—å¤šæ·±
    c: {
      handler: function (val, oldVal) { /* ... */ },
      deep: true
    },
    // immediate: true
    // è¯¥å›è°ƒå°†ä¼šåœ¨ä¾¦å¬å¼€å§‹ä¹‹åè¢«ç«‹å³è°ƒç”¨
    d: {
      handler: 'someMethod',
      immediate: true
    },
    // ä½ å¯ä»¥ä¼ å…¥å›è°ƒæ•°ç»„ï¼Œå®ƒä»¬ä¼šè¢«é€ä¸€è°ƒç”¨
    e: [
      'handle1',
      function handle2 (val, oldVal) { /* ... */ },
      {
        handler: function handle3 (val, oldVal) { /* ... */ },
        /* ... */
      }
    ],
    // watch vm.e.f's value: {g: 5}
    'e.f': function (val, oldVal) { /* ... */ }
  }
})
vm.a = 2 // =&gt; new: 2, old: 1
</code></pre>
<figure data-type="image" tabindex="1"><img src="http://kevin5979.github.io/post-images/1635996325170.png" alt="" loading="lazy"></figure>
<h2 id="vmwatch-exporfn-callback-options">vm.$watch( expOrFn, callback, [options] )</h2>
<ul>
<li>æˆ‘ä»¬å¯ä»¥åœ¨createdçš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œä½¿ç”¨this.$watchsæ¥ä¾¦å¬ï¼›
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦ä¾¦å¬çš„æºï¼›</li>
<li>ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¾¦å¬çš„å›è°ƒå‡½æ•°callbackï¼›</li>
<li>ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯é¢å¤–çš„å…¶ä»–é€‰é¡¹ï¼Œæ¯”å¦‚deepã€immediateï¼›</li>
<li>è¿”å›ä¸€ä¸ªå–æ¶ˆè§‚å¯Ÿå‡½æ•°ï¼Œç”¨æ¥åœæ­¢è§¦å‘å›è°ƒï¼š</li>
</ul>
</li>
</ul>
<p><img src="http://kevin5979.github.io/post-images/1635996639727.png" alt="" loading="lazy"><br>
<img src="http://kevin5979.github.io/post-images/1635996828669.png" alt="" loading="lazy"></p>
<p>*é“¾æ¥: https://cn.vuejs.org/v2/api/#vm-watch</p>
<h2 id="æ³¨æ„">æ³¨æ„</h2>
<figure data-type="image" tabindex="2"><img src="http://kevin5979.github.io/post-images/1635996472366.png" alt="" loading="lazy"></figure>
 <br/>
<font size="2">æœ€åæ›´æ–°äº 2021-11-4</font>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ref å’Œ options]]></title>
        <id>http://kevin5979.github.io/post/ref-he-options/</id>
        <link href="http://kevin5979.github.io/post/ref-he-options/">
        </link>
        <updated>2021-11-01T07:13:04.000Z</updated>
        <summary type="html"><![CDATA[<p>æœ€è¿‘ä¸Šç­ç”¨vueå†™ä¸€ä¸ªç®¡ç†ç³»ç»Ÿï¼Œå¾ˆå¤šçš„è¡¨æ ¼é¡µé¢éƒ½ä¼šæœ‰å¼¹å‡ºçª—ï¼Œä¹Ÿä¼šæœ‰å¾ˆå¤šçš„åˆ†é¡µè¯·æ±‚ç­‰ç­‰é€šç”¨åŠŸèƒ½ï¼Œè¿™é‡Œè®°å½•ä¸€äº›ç®¡ç†ç³»ç»Ÿçš„é€šç”¨ç®€ä¾¿å†™æ³•ğŸš•ğŸš•ğŸš•ï¼ˆæ˜¨å¤©å‰ªäº†ä¸ªå¾ˆä¸‘çš„å¤´å‘ï¼Œæ°”æ­»ğŸ˜¤æˆ‘äº†ï¼‰</p>
]]></summary>
        <content type="html"><![CDATA[<p>æœ€è¿‘ä¸Šç­ç”¨vueå†™ä¸€ä¸ªç®¡ç†ç³»ç»Ÿï¼Œå¾ˆå¤šçš„è¡¨æ ¼é¡µé¢éƒ½ä¼šæœ‰å¼¹å‡ºçª—ï¼Œä¹Ÿä¼šæœ‰å¾ˆå¤šçš„åˆ†é¡µè¯·æ±‚ç­‰ç­‰é€šç”¨åŠŸèƒ½ï¼Œè¿™é‡Œè®°å½•ä¸€äº›ç®¡ç†ç³»ç»Ÿçš„é€šç”¨ç®€ä¾¿å†™æ³•ğŸš•ğŸš•ğŸš•ï¼ˆæ˜¨å¤©å‰ªäº†ä¸ªå¾ˆä¸‘çš„å¤´å‘ï¼Œæ°”æ­»ğŸ˜¤æˆ‘äº†ï¼‰</p>
<!-- more -->
<h2 id="ref-æ¥æ§åˆ¶å¼¹å‡ºçª—">ref æ¥æ§åˆ¶å¼¹å‡ºçª—</h2>
<h3 id="æ­¥éª¤">æ­¥éª¤</h3>
<ol>
<li>ä¸»é¡µé¢ä¸­ç»™å¼¹çª—ç»„ä»¶æ·»åŠ ref</li>
<li>ä½¿ç”¨refè·å–å¼¹çª—ç»„ä»¶å…ƒç´ ï¼Œè°ƒç”¨ç»„ä»¶çš„initæ–¹æ³•ï¼Œå¹¶ä¼ é€’å‚æ•°</li>
<li>åœ¨å¼¹çª—ç»„ä»¶ä¸­ä¿å­˜æ•°æ®ï¼Œè¿›è¡Œæ¸²æŸ“ç­‰æ“ä½œ</li>
<li>å¦‚æœæœ‰äº‹ä»¶é€šçŸ¥çˆ¶ç»„ä»¶ï¼Œé€šè¿‡$emitæ¥å‘é€</li>
</ol>
<h3 id="ä»£ç ">ä»£ç </h3>
<pre><code class="language-html">&lt;handle ref=&quot;handle&quot; /&gt;
</code></pre>
<pre><code class="language-js">this.$nextTick(() =&gt; {
    this.$refs.handle.init('å‚æ•°');
});
</code></pre>
<pre><code class="language-js">&lt;template&gt;
  &lt;el-dialog
    v-if=&quot;open&quot;
    title=&quot;æŸ¥çœ‹&quot;
    top=&quot;6vh&quot;
    append-to-body
    :visible.sync=&quot;open&quot;
    :before-close=&quot;handleClose&quot;
  &gt;
    å†…å®¹
  &lt;/el-dialog&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: &quot;handle&quot;,
  data() {
    return {
      open: false,
      list: {}
    };
  },
  methods: {
    init(data) {
      this.open = true;
      this.list = data;
    },
    handleClose(done) { // å…³é—­
    // this.$emit('event')
      done();
    }
  }
};
&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;
</code></pre>
<h2 id="options-åˆå§‹åŒ–dataæ•°æ®">options åˆå§‹åŒ–dataæ•°æ®</h2>
<h3 id="è¯­æ³•-thisoptionsdata">è¯­æ³• : this.$options.data()</h3>
<ul>
<li>æ³¨æ„ï¼šdata()ä¸­è‹¥ä½¿ç”¨äº†thisæ¥è®¿é—®propsæˆ–methodsï¼Œåœ¨é‡ç½®<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi><mi mathvariant="normal">æ—¶</mi><mi mathvariant="normal">ï¼Œ</mi><mi mathvariant="normal">æ³¨</mi><mi mathvariant="normal">æ„</mi><mi>t</mi><mi>h</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">dataæ—¶ï¼Œæ³¨æ„this.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord cjk_fallback">æ—¶</span><span class="mord cjk_fallback">ï¼Œ</span><span class="mord cjk_fallback">æ³¨</span><span class="mord cjk_fallback">æ„</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">i</span><span class="mord mathdefault">s</span><span class="mord">.</span></span></span></span>options.data()çš„thisæŒ‡å‘ï¼Œæœ€å¥½ä½¿ç”¨this.$options.data.call(this)ã€‚</li>
</ul>
<h3 id="ä»£ç -2">ä»£ç </h3>
<pre><code class="language-js">data() {
  return {
    queryParams: {
      current: 1,
      size: 10,
      supplierNum: &quot;&quot;
    }
  }
}

// é‡ç½®
resetQuery() {
  this.queryParams = this.$options.data().call(this).queryParams;
  this.getList();
}
</code></pre>
<br/>
<font size="2">æœ€åæ›´æ–°äº 2021-11-1</font>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å¾®ä¿¡å°ç¨‹åºçš„è·¯ç”±æ‹¦æˆª]]></title>
        <id>http://kevin5979.github.io/post/wei-xin-xiao-cheng-xu-de-lu-you-lan-jie/</id>
        <link href="http://kevin5979.github.io/post/wei-xin-xiao-cheng-xu-de-lu-you-lan-jie/">
        </link>
        <updated>2021-10-29T01:44:26.000Z</updated>
        <summary type="html"><![CDATA[<p>æ˜¨å¤©å†™äº†ä¸ªå°ç¨‹åºæ¡ˆä¾‹ï¼Œå‘ç°å°ç¨‹åºæ²¡æœ‰æä¾›è·¯ç”±æ‹¦æˆªçš„åŠŸèƒ½ï¼ŒæŸ¥äº†åŠå¤©èµ„æ–™ï¼Œç»ˆäºæ˜¯æå®šäº†ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ä¸‹<br>
PS: å¦‚æœå¯¹node.jsæ¯”è¾ƒç†Ÿæ‚‰çš„è¯ï¼Œåº”è¯¥å¯¹express/koaæ¡†æ¶ä¸­çš„ç»å¸¸æåˆ°çš„ä¸­é—´ä»¶æ¦‚å¿µæ¯”è¾ƒç†Ÿæ‚‰ï¼Œè¿™é‡Œå°±ä½¿ç”¨ä¸­é—´ä»¶çš„æœºåˆ¶æ¥å¤„ç†ã€‚ç»“åˆå°ç¨‹åºä¸­<code>Page()å‡½æ•°</code>å’Œ<code>ç”Ÿå‘½å‘¨æœŸ</code></p>
]]></summary>
        <content type="html"><![CDATA[<p>æ˜¨å¤©å†™äº†ä¸ªå°ç¨‹åºæ¡ˆä¾‹ï¼Œå‘ç°å°ç¨‹åºæ²¡æœ‰æä¾›è·¯ç”±æ‹¦æˆªçš„åŠŸèƒ½ï¼ŒæŸ¥äº†åŠå¤©èµ„æ–™ï¼Œç»ˆäºæ˜¯æå®šäº†ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ä¸‹<br>
PS: å¦‚æœå¯¹node.jsæ¯”è¾ƒç†Ÿæ‚‰çš„è¯ï¼Œåº”è¯¥å¯¹express/koaæ¡†æ¶ä¸­çš„ç»å¸¸æåˆ°çš„ä¸­é—´ä»¶æ¦‚å¿µæ¯”è¾ƒç†Ÿæ‚‰ï¼Œè¿™é‡Œå°±ä½¿ç”¨ä¸­é—´ä»¶çš„æœºåˆ¶æ¥å¤„ç†ã€‚ç»“åˆå°ç¨‹åºä¸­<code>Page()å‡½æ•°</code>å’Œ<code>ç”Ÿå‘½å‘¨æœŸ</code></p>
<!-- more -->
<h2 id="éœ€æ±‚æè¿°">éœ€æ±‚æè¿°</h2>
<blockquote>
<p>å°ç¨‹åºéœ€å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰äº›é¡µé¢æˆ‘ä»¬å¸Œæœ›ç”¨æˆ·ç™»å½•æˆæƒåæ‰å¯ä»¥ä½¿ç”¨ï¼Œç„¶è€Œæˆ‘ä»¬ä¸èƒ½å†æ¯ä¸ªé¡µé¢æ·»åŠ ç™»å½•éªŒè¯ä»£ç ï¼Œè¿™æ ·ä¼¼ä¹å¤ªéº»çƒ¦äº†ï¼Œå¸Œæœ›èƒ½åˆ¶ä½œä¸€ä¸ªé€šç”¨çš„å°ç¨‹åºè·¯ç”±æ‹¦æˆªå™¨</p>
</blockquote>
<h2 id="å®ç°è¿‡ç¨‹">å®ç°è¿‡ç¨‹</h2>
<h3 id="å¾®ä¿¡æˆæƒä»£ç ">å¾®ä¿¡æˆæƒä»£ç </h3>
<pre><code class="language-js">wx.getUserProfile({
  desc: 'ç”¨äºå®Œå–„ä¼šå‘˜èµ„æ–™', // å£°æ˜è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯åçš„ç”¨é€”ï¼Œåç»­ä¼šå±•ç¤ºåœ¨å¼¹çª—ä¸­ï¼Œè¯·è°¨æ…å¡«å†™
  success: (res) =&gt; {
    this.setData({
    userInfo: res.userInfo
    })
  }
})
</code></pre>
<h3 id="ç”¨æˆ·èµ„æ–™çš„ä¿å­˜-æ¸…é™¤">ç”¨æˆ·èµ„æ–™çš„ä¿å­˜ã€æ¸…é™¤</h3>
<pre><code class="language-js">wx.getUserProfile({
  desc: 'ç”¨äºå®Œå–„ä¼šå‘˜èµ„æ–™', // å£°æ˜è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯åçš„ç”¨é€”ï¼Œåç»­ä¼šå±•ç¤ºåœ¨å¼¹çª—ä¸­ï¼Œè¯·è°¨æ…å¡«å†™
  success: (res) =&gt; {
    this.setData({
    userInfo: res.userInfo
    })
    wx.setStorageSync('userInfo', res.userInfo)
  },
  fail() {
    this.setData({
      userInfo: {}
    })
    wx.removeStorageSync('userInfo')
  }
})
</code></pre>
<h3 id="å…¨å±€è·¯ç”±æ‹¦æˆªå™¨">å…¨å±€è·¯ç”±æ‹¦æˆªå™¨</h3>
<ul>
<li>æ‹¦æˆªpageé¡µé¢çš„<code>onShowæ–¹æ³•</code>ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æƒé™</li>
</ul>
<pre><code class="language-js"> /**
  * routerFillter --å…¨å±€è·¯ç”±æ‹¦æˆªå™¨
  * @function
  * @param{Object} pageObj å½“å‰é¡µé¢çš„pageå¯¹è±¡
  * @param{Boolean} flag æ˜¯å¦å¼€å¯æƒé™åˆ¤æ–­
  */
 exports.routerFilter = function (pageObj, flag = true) {
     if (flag) {
         pageObj.onShow = () =&gt; {
             if (!wx.getStorageSync('userInfo')) {
                 let pages = getCurrentPages();
                 let currPage = null;
                 if (pages.length) {
                     currPage = pages[pages.length - 1];
                 }
                 wx.setStorageSync('prevRouter', currPage.route) // è®°å½•å½“å‰è·¯ç”±ï¼Œç”¨äºç™»å½•å®Œè·³è½¬å›å½“å‰é¡µé¢
                  wx.redirectTo({
                      url: '/pages/auth/auth',
                  })
             }
         }
     }
     return Page(pageObj)
 }
</code></pre>
<h3 id="æˆæƒä»£ç ä¿®æ”¹">æˆæƒä»£ç ä¿®æ”¹</h3>
<ul>
<li>æˆåŠŸåè¿”å›ä¹‹å‰é¡µé¢</li>
</ul>
<pre><code class="language-js">//æ£€æµ‹æˆæƒç™»å½•
getUserProfile() {
    wx.getUserProfile({
        desc: 'ç”¨äºå®Œå–„èµ„æ–™',
        success: (res) =&gt; {
            this.setData({
                'userInfo.avatarUrl': res.userInfo.avatarUrl,
                'userInfo.gender': res.userInfo.gender,
                'userInfo.nickName': res.userInfo.nickName
            })
            wx.setStorageSync('userInfo', res.userInfo)
            wx.navigateTo({
                url: wx.getStorageSync('prevRouter'), // ä½¿ç”¨è·¯ç”±è·³è½¬
                fail: () =&gt; {
                    wx.switchTab({
                        url: '/' + wx.getStorageSync('prevRouter') // tabè·³è½¬
                    })
                }
            })
        },
        fail() {
            wx.removeStorageSync('userInfo')
            wx.navigateBack({
                delta: 1
            })
        }
    })
}
</code></pre>
<h3 id="ä½¿ç”¨æ‹¦æˆªå™¨">ä½¿ç”¨æ‹¦æˆªå™¨</h3>
<ul>
<li>routerFillter æ›¿æ¢ Page</li>
</ul>
<pre><code class="language-js">import {
    routerFillter
} from '../../utils/filter.js';
routerFillter({
    // å†…éƒ¨å’ŒåŸæ¥çš„Pageä¸€æ ·
})
</code></pre>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<ul>
<li>ä¸Šé¢è´´ä»£ç æœ‰ç‚¹ä¹±äº†ï¼Œè¿™é‡Œå†å†™ä¸€ä¸‹è¿‡ç¨‹ğŸ˜˜
<ul>
<li>ç¼–å†™æˆæƒé¡µé¢ï¼ŒæˆæƒæŒ‰é’®ç»‘å®šäº‹ä»¶</li>
<li>åœ¨äº‹ä»¶ä¸­ ç¼–å†™å¾®ä¿¡æˆæƒä»£ç </li>
<li>åœ¨å·¥å…·å‡½æ•°ä¸­åˆ›å»º å…¨å±€è·¯ç”±æ‹¦æˆªå™¨ï¼Œç¼–å†™å‡½æ•°</li>
<li>ä¿®æ”¹å¾®ä¿¡æˆæƒä»£ç ï¼Œå¤„ç†è·¯ç”±è·³è½¬</li>
<li>åœ¨éœ€è¦çš„é¡µé¢ä¸­ä½¿ç”¨</li>
</ul>
</li>
</ul>
<br/>
<font size="2">æœ€åæ›´æ–°äº 2021-10-29</font>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[åšå®¢å¹³å°åç«¯å¼€å‘è®°å½• - é€šç”¨æ¨¡å¼å¼€å‘(ç”¨æˆ·åŠ¨æ€æ¥å£)]]></title>
        <id>http://kevin5979.github.io/post/bo-ke-ping-tai-hou-duan-kai-fa-ji-lu-tong-yong-mo-shi-kai-fa-yong-hu-dong-tai-jie-kou/</id>
        <link href="http://kevin5979.github.io/post/bo-ke-ping-tai-hou-duan-kai-fa-ji-lu-tong-yong-mo-shi-kai-fa-yong-hu-dong-tai-jie-kou/">
        </link>
        <updated>2021-10-27T01:28:18.000Z</updated>
        <summary type="html"><![CDATA[<p>*è€ƒè™‘åˆ°åé¢æ¥å£çš„ç¼–å†™éƒ½æ˜¯ä¸€ä¸ªå¥—è·¯ï¼Œè¿™é‡Œç”¨ä¸€ä¸ªç”¨æˆ·åŠ¨æ€æ¥å£çš„å¢åˆ æ”¹æŸ¥æ¥å½“ä¸ªæ¨¡æ¿å§ï¼Œåé¢çš„æ¥å£ï¼ŒæŒ‰è¿™ä¸ªæ ¼å¼ä¿®æ”¹ä¸€ä¸‹å°±OKäº†â¤ï¸â¤ï¸â¤ï¸</p>
]]></summary>
        <content type="html"><![CDATA[<p>*è€ƒè™‘åˆ°åé¢æ¥å£çš„ç¼–å†™éƒ½æ˜¯ä¸€ä¸ªå¥—è·¯ï¼Œè¿™é‡Œç”¨ä¸€ä¸ªç”¨æˆ·åŠ¨æ€æ¥å£çš„å¢åˆ æ”¹æŸ¥æ¥å½“ä¸ªæ¨¡æ¿å§ï¼Œåé¢çš„æ¥å£ï¼ŒæŒ‰è¿™ä¸ªæ ¼å¼ä¿®æ”¹ä¸€ä¸‹å°±OKäº†â¤ï¸â¤ï¸â¤ï¸</p>
<!-- more -->
<h2 id="åˆ›å»ºç”¨æˆ·åŠ¨æ€è¡¨">åˆ›å»ºç”¨æˆ·åŠ¨æ€è¡¨</h2>
<pre><code class="language-js">CREATE TABLE IF NOT EXISTS `moment`(
	id INT PRIMARY KEY AUTO_INCREMENT,
	content VARCHAR(1000) NOT NULL,
    user_id INT NOT NULL,
	createAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	updataAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
	FOREIGN KEY(user_id) REFERENCES user(id)
);
</code></pre>
<h2 id="åˆ›å»ºåŠ¨æ€è·¯ç”±">åˆ›å»ºåŠ¨æ€è·¯ç”±</h2>
<h3 id="åˆ›å»º-routermomentrouterjs-æ–‡ä»¶">åˆ›å»º router/moment.router.js æ–‡ä»¶</h3>
<pre><code class="language-js">const Router = require('koa-router');

const momentRouter = new Router({
  prefix: &quot;/moment&quot;
});

momentRouter.post(&quot;/&quot;, (ctx) =&gt; {
  ctx.body = &quot;åˆ›å»ºåŠ¨æ€&quot;
})

module.exports = momentRouter;
</code></pre>
<h3 id="éªŒè¯tokenæ˜¯å¦æœ‰æ•ˆ-ç¼–è¾‘-routermomentrouterjs">éªŒè¯tokenæ˜¯å¦æœ‰æ•ˆ  ç¼–è¾‘ router/moment.router.js</h3>
<pre><code class="language-js">const { verifyAuth } = require('../middleware/auth.middleware');

momentRouter.post(&quot;/&quot;, verifyAuth);
</code></pre>
<h3 id="æ–°å»º-momentcontrollerjs-æ–‡ä»¶æ§åˆ¶å±‚è¿æ¥è·¯ç”±å’ŒæœåŠ¡å±‚">æ–°å»º moment.controller.js æ–‡ä»¶ï¼Œæ§åˆ¶å±‚ï¼Œè¿æ¥è·¯ç”±å’ŒæœåŠ¡å±‚</h3>
<pre><code class="language-js">const momentService = require('../service/moment.service');

class MomentController {
  // åˆ›å»ºåŠ¨æ€
  async create(ctx, next) {
    // 1.è·å–ç”¨æˆ·ä¿¡æ¯
    const user = ctx.user;
    // 2.è·å–ç”¨æˆ·åŠ¨æ€
    const { content } = ctx.request.body;
    // 3.æ“ä½œæ•°æ®åº“
    const result = await momentService.create(user, content);
    // 4.è¿”å›ç»“æœ
    ctx.body = result;
  }
}

module.exports = new MomentController();
</code></pre>
<h3 id="æ–°å»º-momentservicejs-æ–‡ä»¶æœåŠ¡å±‚ä¸æ•°æ®åº“äº¤äº’">æ–°å»º moment.service.js æ–‡ä»¶ï¼ŒæœåŠ¡å±‚ï¼Œä¸æ•°æ®åº“äº¤äº’</h3>
<pre><code class="language-js">const connection = require('../app/database');

class MomentService {
  // åˆ›å»ºåŠ¨æ€
  async create(user, content) {
    // 1.æ’å…¥æ•°æ®åº“
    try {
      const sql = `insert into moment (content, user_id) values(?,?)`;
      const result = await connection.execute(sql, [content, user.id]);
      return result;
    } catch (error) {
      console.log(error);
    }
  }
}

module.exports = new MomentService();
</code></pre>
<h3 id="ä¿®æ”¹-routermomentrouterjs-æ–‡ä»¶">ä¿®æ”¹ router/moment.router.js æ–‡ä»¶</h3>
<pre><code class="language-js">const { verifyAuth } = require('../middleware/auth.middleware');
const { create } = require('../controller/moment.controller');

momentRouter.post(&quot;/&quot;, verifyAuth, create);
</code></pre>
<p><img src="http://kevin5979.github.io/post-images/1635299130391.jpg" alt="" loading="lazy"><br>
*æˆåŠŸæ·»åŠ åŠ¨æ€</p>
<h2 id="è·å–æŸæ¡åŠ¨æ€">è·å–æŸæ¡åŠ¨æ€</h2>
<h3 id="æ·»åŠ è·¯ç”±ç¼–è¾‘-momentrouterjs">æ·»åŠ è·¯ç”±ï¼Œç¼–è¾‘ moment.router.js</h3>
<pre><code class="language-js">const { create, detail } = require('../controller/moment.controller');

// æ ¹æ®idè·å–æŸæ¡åŠ¨æ€
momentRouter.get(&quot;/:momentId&quot;, detail)
</code></pre>
<h3 id="æ·»åŠ -detail-æ–¹æ³•ç¼–è¾‘-momentcontrollerjs">æ·»åŠ  detail æ–¹æ³•ï¼Œç¼–è¾‘ moment.controller.js</h3>
<pre><code class="language-js">// åŠ¨æ€è¯¦æƒ…
async detail(ctx, next) {
  // 1.è·å–åŠ¨æ€id
  const momentId = ctx.params.momentId;
  // 2.æŸ¥è¯¢æ•°æ®åº“
  const result = await momentService.getMomentById(momentId);
  // 3.è¿”å›ç»“æœ
  ctx.body = result;
}
</code></pre>
<h3 id="æ·»åŠ -getmomentbyid-æ–¹æ³•ç¼–è¾‘-servicemomentservicejs">æ·»åŠ  getMomentById æ–¹æ³•ï¼Œç¼–è¾‘ service/moment.service.js</h3>
<pre><code class="language-js">// æ ¹æ®idè·å–åŠ¨æ€
async getMomentById(momentId) {
  try {
    const statement = `select * from moment where id = ?`;
    const result = await connection.execute(statement, [momentId]);
    return result[0];
  } catch (error) {
    console.log(error);
  }
}
</code></pre>
<figure data-type="image" tabindex="1"><img src="http://kevin5979.github.io/post-images/1635299448408.jpg" alt="" loading="lazy"></figure>
<p>*æˆåŠŸè·å–åŠ¨æ€</p>
<h2 id="è·å–åŠ¨æ€åˆ—è¡¨">è·å–åŠ¨æ€åˆ—è¡¨</h2>
<h3 id="æ·»åŠ è·¯ç”±ç¼–è¾‘-routermomentjs">æ·»åŠ è·¯ç”±ï¼Œç¼–è¾‘ router/moment.js</h3>
<pre><code class="language-js">const { create, detail, list } = require('../controller/moment.controller');
// è·å–å¤šæ¡åŠ¨æ€
momentRouter.get(&quot;/&quot;, list);
</code></pre>
<h3 id="æ·»åŠ -list-æ–¹æ³•ç¼–è¾‘-controllermomentcontrollerjs">æ·»åŠ  list æ–¹æ³•ï¼Œç¼–è¾‘ controller/moment.controller.js</h3>
<pre><code class="language-js">// åŠ¨æ€åˆ—è¡¨
async list(ctx, next) {
  // 1.è·å– offset/limit
  const { offset, limit } = ctx.query;
  // 2.æŸ¥è¯¢æ•°æ®
  const result = await momentService.getMomentList(offset, limit);
  // 3.è¿”å›ç»“æœ
  ctx.body = result;
}
</code></pre>
<h3 id="æ·»åŠ -getmomentlist-æ–¹æ³•ç¼–è¾‘-servicemomentservicejs">æ·»åŠ  getMomentList æ–¹æ³•ï¼Œç¼–è¾‘ service/moment.service.js</h3>
<pre><code class="language-js">  // è·å–åŠ¨æ€åˆ—è¡¨
async getMomentList(offset, limit) {
  try {
    const statement = `SELECT 
                        m.id id,
                        m.content content, 
                        m.createAt createTime,
                        m.updataAt updataTime,
                      JSON_OBJECT('id', u.id, 'nickname', u.nickname) user
                      FROM moment m
                      LEFT JOIN user u ON m.user_id = u.id
                      LIMIT ?, ?`;
    const result = await connection.execute(statement, [offset, limit]);
    return result[0];
  } catch (error) {
    console.log(error);
  }
}
</code></pre>
<p><img src="http://kevin5979.github.io/post-images/1635299656042.jpg" alt="" loading="lazy"><br>
*æˆåŠŸè·å–åŠ¨æ€åˆ—è¡¨</p>
<h2 id="ä¿®æ”¹ä¸€æ¡åŠ¨æ€">ä¿®æ”¹ä¸€æ¡åŠ¨æ€</h2>
<h3 id="æ·»åŠ è·¯ç”±ç¼–è¾‘-routermomentrouterjs">æ·»åŠ è·¯ç”±ï¼Œç¼–è¾‘ router/moment.router.js</h3>
<pre><code class="language-js">const { verifyAuth, verifyPermission } = require('../middleware/auth.middleware');
const { create, detail, list, update } = require('../controller/moment.controller');

// ä¿®æ”¹ä¸€æ¡åŠ¨æ€
/**
verifyAuth : éªŒè¯tokenæ˜¯å¦æœ‰æ•ˆ
verifyPermission : éªŒè¯ç”¨æˆ·æ˜¯å¦å…·å¤‡æƒé™
update : æ›´æ–°åŠ¨æ€
*/
momentRouter.patch(&quot;/:momentId&quot;, verifyAuth, verifyPermission, update);
</code></pre>
<h3 id="æ·»åŠ -verifypermission-æ–¹æ³•ç¼–å†™-middlewareauthmiddlewarejs">æ·»åŠ  verifyPermission æ–¹æ³•ï¼Œç¼–å†™ middleware/auth.middleware.js</h3>
<pre><code class="language-js">const authService = require('../service/auth.service');

// éªŒè¯ç”¨æˆ·æ“ä½œæƒé™
const verifyPermission = async (ctx, next) =&gt; {
  // 1.è·å–å‚æ•°
  const [resourceKey] = Object.keys(ctx.params); // æ“ä½œçš„å­—æ®µ  momentId
  const tableName = resourceKey.replace(&quot;Id&quot;, &quot;&quot;); // æ“ä½œçš„è¡¨å  moment
  const resourceId = ctx.params[resourceKey]; // æ“ä½œå­—æ®µçš„å€¼  1
  const { id } = ctx.user; // å½“å‰ç”¨æˆ·id  1
  // 2.æŸ¥è¯¢æ˜¯å¦å…·å¤‡æƒé™
  try {
    const isPermission = await authService.checkResource(tableName, resourceId, id);
    if (!isPermission) {// æ²¡æœ‰æƒé™
      const error = new Error(errorTypes.UN_PERMISSION);
      ctx.app.emit('error', error, ctx);
    }
    await next();
  } catch (error) {
    console.log(error);
  }
}
</code></pre>
<h3 id="ç¼–å†™-checkresource-æ–¹æ³•-æ£€æµ‹æƒé™åˆ›å»º-serviceauthservicejs-æ–‡ä»¶">ç¼–å†™ checkResource æ–¹æ³•ï¼Œ æ£€æµ‹æƒé™ï¼Œåˆ›å»º service/auth.service.js æ–‡ä»¶</h3>
<pre><code class="language-js">const connection = require(&quot;../app/database&quot;);

class AuthService {
  // æŸ¥è¯¢åŠ¨æ€æƒé™
  async checkResource(tableName, id, userId) {
    try {
      const statement = `select * from ${tableName} where id = ? and user_id = ?`;
      const [result] = await connection.execute(statement, [id, userId]);
      return result.length === 0 ? false : true;
    } catch (error) {
      console.log(error);
    }
  }
}

module.exports = new AuthService();
</code></pre>
<h3 id="æ·»åŠ -update-æ–¹æ³•ä¿®æ”¹åŠ¨æ€ç¼–è¾‘-servicemomentservicejs">æ·»åŠ  update æ–¹æ³•ï¼Œä¿®æ”¹åŠ¨æ€ï¼Œç¼–è¾‘ service/moment.service.js</h3>
<pre><code class="language-js">// ä¿®æ”¹åŠ¨æ€
async update(content, momentId) {
  try {
    const statement = `UPDATE moment SET content = ? WHERE id = ?`;
    const result = await connection.execute(statement, [content, momentId]);
    return result[0];
  } catch (error) {
    console.log(error);
  }
}
</code></pre>
<figure data-type="image" tabindex="2"><img src="http://kevin5979.github.io/post-images/1635299905534.jpg" alt="" loading="lazy"></figure>
<p>*æˆåŠŸä¿®æ”¹åŠ¨æ€</p>
<h2 id="åˆ é™¤ä¸€æ¡åŠ¨æ€">åˆ é™¤ä¸€æ¡åŠ¨æ€</h2>
<h3 id="æ·»åŠ è·¯ç”±ç¼–è¾‘-routermomentrouterjs-2">æ·»åŠ è·¯ç”±ï¼Œç¼–è¾‘ router/moment.router.js</h3>
<pre><code class="language-js">const { verifyAuth, verifyPermission } = require('../middleware/auth.middleware');
const { create, detail, list, update, remove } = require('../controller/moment.controller');

// ä¿®æ”¹ä¸€æ¡åŠ¨æ€
/**
verifyAuth : éªŒè¯tokenæ˜¯å¦æœ‰æ•ˆ
verifyPermission : éªŒè¯ç”¨æˆ·æ˜¯å¦å…·å¤‡æƒé™
update : æ›´æ–°åŠ¨æ€
*/
momentRouter.delete(&quot;/:momentId&quot;, verifyAuth, verifyPermission, remove);
</code></pre>
<h3 id="æ·»åŠ -remove-æ–¹æ³•ä¿®æ”¹åŠ¨æ€ç¼–è¾‘-controllermomentcontrollerjs">æ·»åŠ  remove æ–¹æ³•ï¼Œä¿®æ”¹åŠ¨æ€ï¼Œç¼–è¾‘ controller/moment.controller.js</h3>
<pre><code class="language-js">// åˆ é™¤åŠ¨æ€
async remove(ctx, next) {
  // 1.è·å–å‚æ•°
  const { momentId } = ctx.params;
  // 2.åˆ é™¤åŠ¨æ€
  const result = await momentService.remove(momentId);
  // 3.è¿”å›ç»“æœ
  ctx.body = result;
}
</code></pre>
<h3 id="æ·»åŠ -remove-æ–¹æ³•æ›´æ–°æ•°æ®åº“ç¼–è¾‘-servicemomentservicejs">æ·»åŠ  remove æ–¹æ³•ï¼Œæ›´æ–°æ•°æ®åº“ï¼Œç¼–è¾‘ service/moment.service.js</h3>
<pre><code class="language-js">// åˆ é™¤åŠ¨æ€
async remove(momentId) {
  try {
    const statement = `DELETE FROM moment WHERE id = ?`;
    const result = await connection.execute(statement, [momentId]);
    console.log(result);
    return result[0];
  } catch (error) {
    console.log(error);
  }
}
</code></pre>
<figure data-type="image" tabindex="3"><img src="http://kevin5979.github.io/post-images/1635300142067.jpg" alt="" loading="lazy"></figure>
<p>*æˆåŠŸåˆ é™¤åŠ¨æ€</p>
<h2 id="åŠ¨æ€-ç‚¹èµå–æ¶ˆç‚¹èµ">åŠ¨æ€ ç‚¹èµ/å–æ¶ˆç‚¹èµ</h2>
<h3 id="ä¸º-moment-è¡¨æ·»åŠ -ç‚¹èµæ•°-å­—æ®µ">ä¸º moment è¡¨æ·»åŠ  ç‚¹èµæ•° å­—æ®µ</h3>
<pre><code class="language-js">ALTER TABLE `moment` ADD likes int(10) DEFAULT 0;
</code></pre>
<h3 id="åˆ›å»ºåŠ¨æ€ç‚¹èµè¡¨">åˆ›å»ºåŠ¨æ€ç‚¹èµè¡¨</h3>
<pre><code class="language-js">CREATE TABLE IF NOT EXISTS `support`(
  moment_id INT NOT NULL,
  user_id INT NOT NULL
);
</code></pre>
<h3 id="æ·»åŠ ç‚¹èµè·¯ç”±ç¼–è¾‘-routermomentrouterjs">æ·»åŠ ç‚¹èµè·¯ç”±ï¼Œç¼–è¾‘ router/moment.router.js</h3>
<pre><code class="language-js">const { create, detail, list, update, remove, support } = require('../controller/moment.controller');

// åŠ¨æ€ ç‚¹èµ/å–æ¶ˆç‚¹èµ
momentRouter.get(&quot;/:momentId/support&quot;, verifyAuth, support);
</code></pre>
<h3 id="æ·»åŠ -support-æ–¹æ³•ç¼–è¾‘-controllermomentcontrollerjs">æ·»åŠ  support æ–¹æ³•ï¼Œç¼–è¾‘ controller/moment.controller.js</h3>
<pre><code class="language-js">const supportService = require('../service/support.service');  

// ç‚¹èµåŠ¨æ€
async support(ctx, next) {
  // 1.è·å–å‚æ•°
  const { momentId } = ctx.params;
  const { id } = ctx.user;
  // 2.æŸ¥è¯¢ç‚¹èµè¡¨
  const isSupport = await supportService.isSupport(momentId, id);
  if (isSupport) {
    // å·²ç‚¹èµ, éœ€å–æ¶ˆç‚¹èµ
    // 1.æ›´æ–° ç‚¹èµè¡¨ / åŠ¨æ€è¡¨
    const result = await supportService.unSupport(momentId, id);
    ctx.body = result;
  } else {
    // æœªç‚¹èµ, éœ€ç‚¹èµ
    // 1.æ›´æ–° ç‚¹èµè¡¨ / åŠ¨æ€è¡¨
    const result = await supportService.toSupport(momentId, id);
    ctx.body = result;
  }
}
</code></pre>
<h3 id="ç¼–å†™-issupport-tosupport-unsupport-æ–¹æ³•åˆ›å»º-servicesupportservicejs">ç¼–å†™ isSupport ã€ toSupport ã€ unSupport æ–¹æ³•ï¼Œåˆ›å»º service/support.service.js</h3>
<pre><code class="language-js">const connection = require(&quot;../app/database&quot;);

class SupportService {

  // æ˜¯å¦ç‚¹èµ
  async isSupport(momentId, userId) {
    try {
      const statement = `SELECT moment_id, user_id FROM support WHERE moment_id = ? AND user_id = ?`;
      const result = await connection.execute(statement, [momentId, userId]);
      return result[0].length === 0 ? false : true;
    } catch (error) {
      console.log(error);
    }
  }

  // ç‚¹èµæ“ä½œ
  async toSupport(momentId, userId) {
    try {
      // æ“ä½œç‚¹èµè¡¨
      const statement1 = `INSERT INTO support (moment_id, user_id) values(?, ?)`;
      // æ“ä½œåŠ¨æ€è¡¨
      const statement2 = `UPDATE moment SET likes = likes + 1 where id = ?`;
      // æ‰§è¡Œè¯­å¥
      await connection.execute(statement1, [momentId, userId]);
      await connection.execute(statement2, [momentId]);
      // è¿”å›ç»“æœ
      return {
        isSupport: true
      }
    } catch (error) {
      console.log(error);
    }
  }

  // å–æ¶ˆç‚¹èµæ“ä½œ
  async unSupport(momentId, userId) {
    try {
      // æ“ä½œç‚¹èµè¡¨
      const statement1 = `DELETE FROM support WHERE moment_id = ? AND user_id = ?`;
      // æ“ä½œåŠ¨æ€è¡¨
      const statement2 = `UPDATE moment SET likes = likes - 1 where id = ?`;
      // æ‰§è¡Œè¯­å¥
      await connection.execute(statement1, [momentId, userId]);
      await connection.execute(statement2, [momentId]);
      // è¿”å›ç»“æœ
      return {
        isSupport: false
      }
    } catch (error) {
      console.log(error);
    }
  }

}

module.exports = new SupportService();
</code></pre>
<p><img src="http://kevin5979.github.io/post-images/1635300458618.jpg" alt="" loading="lazy"><br>
<img src="http://kevin5979.github.io/post-images/1635300390687.jpg" alt="" loading="lazy"></p>
<p>*åŠ¨æ€æ¥å£åŸºæœ¬å®Œæˆ</p>
<h2 id="æ€»ç»“ä¸€ä¸‹">æ€»ç»“ä¸€ä¸‹</h2>
<h3 id="ç¼–å†™æ¥å£çš„å‡ ä¸ªæ­¥éª¤">ç¼–å†™æ¥å£çš„å‡ ä¸ªæ­¥éª¤</h3>
<ol>
<li>åˆ›å»ºæ•°æ®åº“ã€è¡¨</li>
<li>åˆ›å»ºè·¯ç”± =&gt; router.js</li>
<li>åˆ›å»ºå¤„ç†å‡½æ•°ï¼Œ(æ¥æ”¶å‚æ•°ç­‰æ“ä½œ + è¿æ¥è·¯ç”±å’Œæ•°æ®åº“æ“ä½œ) =&gt; controller.js</li>
<li>åˆ›å»ºæ•°æ®åº“æ“ä½œå‡½æ•° =&gt; service.js</li>
<li>å…¶ä½™æ›´å¤šæ“ä½œ(å¦‚é‰´æƒ)ï¼Œå¯ä½¿ç”¨ä¸­é—´ä»¶å®ç° =&gt; auth.js</li>
</ol>
<br/>
<font size="2">æœ€åæ›´æ–°äº 2021-10-27</font>
]]></content>
    </entry>
</feed>